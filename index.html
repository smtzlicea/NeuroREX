<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', Arial, sans-serif;
            line-height: 1.8;
            color: #333;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            height: 100vh;
            margin: 0;
            background-color: #f9f9f9;
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        p {
            font-size: 1.25rem;
            margin-bottom: 15px;
            max-width: 800px;
        }
        #story {
            visibility: hidden; /* Hide the story content initially */
        }
    </style>
</head>
<body>
    <h1>LOS TRES CERDITOS</h1>
    <div id="story">
        <p>Al lado de sus padres, tres cerditos habían crecido alegres en una cabaña del bosque. Y como ya eran mayores, sus papás decidieron que era hora de que construyeran, cada uno, su propia casa. Los tres cerditos se despidieron de sus papas, y fueron a ver cómo era el mundo, y encontraron un bonito lugar cerca del bosque donde construir sus tres casitas.</p>

        <p>El primer cerdito, el perezoso de la familia, decidió hacer una casa de paja. En un minuto la choza estaba ya hecha. Y entonces se fue a dormir.</p>

        <p>El segundo cerdito, un glotón, prefirió hacer la cabaña de madera. No tardó mucho en construirla y luego se fue a comer manzanas.</p>

        <p>El tercer cerdito, muy trabajador, optó por construirse una casa de ladrillos y cemento. Tardaría más en construirla, pero estaría más protegido. Después de un día de mucho trabajo, la casa quedo preciosa. Pero ya se empezaba a oír los aullidos del lobo en el bosque.</p>

        <p>No tardó mucho para que el lobo se acercara a las casas de los tres cerditos. Hambriento. El lobo se dirigió a la primera casa y dijo:</p>

        <p>– ¡Ábreme la puerta! ¡Ábreme la puerta o soplaré y soplaré y tu casa tiraré!.</p>

        <p>Como el cerdito no la abrió, el lobo sopló con fuerza, y derrumbó la casa de paja.</p>

        <p>El cerdito, temblando de miedo, salió corriendo y entró en la casa de madera de su hermano. El lobo le siguió.</p>

        <p>Y delante de la segunda casa, llamó a la puerta, y dijo:</p>

        <p>– ¡Ábreme la puerta! ¡Ábreme la puerta o soplaré y soplaré y tu casa tiraré!</p>

        <p>Pero el segundo cerdito no la abrió y el lobo sopló y sopló, y aunque la casita de madera aguantó mucho más que la casita de paja, al final la casita se fue por los aires.</p>

        <p>Asustados, los dos cerditos corrieron y entraron en la casa de ladrillos de su otro hermano. Pero como el lobo estaba decidido a comérselos, llamó a la puerta y gritó:</p>

        <p>– ¡Ábreme la puerta! ¡Ábreme la puerta o soplaré y soplaré y tu casa tiraré! Y el cerdito trabajador le dijo:</p>

        <p>– ¡Sopla lo que quieras, pero no la abriré!</p>

        <p>Entonces el lobo sopló y sopló. Sopló con todas sus fuerzas, pero la casa ni se movió. La casa era muy fuerte y resistente. El lobo se quedó casi sin aire. Pero aunque el lobo estaba muy cansado, no desistía. Después de dar vueltas y vueltas a la casa, y no encontrar ningún lugar por donde entrar, pensó en subir al tejado, trajo una escalera, subió a la casa y se deslizó por la chimenea.</p>

        <p>Estaba empeñado en entrar en la casa y comer a los tres cerditos como fuera. Pero lo que él no sabía es que los cerditos pusieron al final de la chimenea, un caldero con agua hirviendo. Y el lobo, al caerse por la chimenea acabó quemándose con el agua caliente. Dio un enorme grito y salió corriendo y nunca más volvió por aquellos parajes. Así los cerditos pudieron vivir tranquilamente. Y tanto el perezoso como el glotón aprendieron que solo con el trabajo se consiguen las cosas. Y enseguida se pusieron manos a la obra, y construyeron otras dos casas de ladrillos, y nunca más tuvieron problemas con ningún lobo.</p>
    </div>

    <script type="text/javascript">
        "use strict";

        $(function(){
            var textNodes = $("#story").find("p").contents().filter(function() {
                return this.nodeType === 3;
            });

            function messUpWords() {
                textNodes.each(function() {
                    var text = this.nodeValue.trim();
                    if (!text) return;

                    var words = text.split(/\s+/);
                    var scrambledWords = words.map((word) => {
                        if (word.length > 2) {
                            var middle = word.slice(1, -1).split('');
                            for (let j = middle.length - 1; j > 0; j--) {
                                const rand = Math.floor(Math.random() * (j + 1));
                                [middle[j], middle[rand]] = [middle[rand], middle[j]];
                            }
                            return word[0] + middle.join('') + word[word.length - 1];
                        }
                        return word;
                    });

                    this.nodeValue = scrambledWords.join(' ');
                });
            }

            // Perform scrambling once before showing the story
            messUpWords();
            
            // Delay the visibility of the story (after it scrambles)
            setTimeout(function() {
                $("#story").css("visibility", "visible");
            }, 1000);  // Delay in milliseconds, adjust as needed

            // Continue scrambling every 500ms
            setInterval(messUpWords, 1500);
        });
    </script>
</body>
</html>
